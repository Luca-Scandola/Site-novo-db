(function(){"use strict";var e={2489:function(e,o,t){var n=t(3751),r=t(641);const a={id:"app"};function s(e,o,t,n,s,i){const u=(0,r.g2)("HeaderNav"),c=(0,r.g2)("router-view"),l=(0,r.g2)("ContactSection");return(0,r.uX)(),(0,r.CE)("div",a,[(0,r.bF)(u),(0,r.bF)(c),(0,r.bF)(l)])}var i=t(33);const u={class:"site-header"},c={class:"container header-inner"},l={class:"logo"},d={class:"nav-list"},m={key:0},p={key:1},f={key:0,class:"profile-menu"};function h(e,o,t,n,a,s){const h=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("header",u,[(0,r.Lk)("div",c,[(0,r.Lk)("h1",l,[(0,r.bF)(h,{to:"/"},{default:(0,r.k6)(()=>o[2]||(o[2]=[(0,r.eW)("BookShare")])),_:1,__:[2]})]),(0,r.Lk)("nav",null,[(0,r.Lk)("ul",d,[(0,r.Lk)("li",null,[(0,r.bF)(h,{to:"/"},{default:(0,r.k6)(()=>o[3]||(o[3]=[(0,r.eW)("Início")])),_:1,__:[3]})]),(0,r.Lk)("li",null,[(0,r.bF)(h,{to:"/recomendacoes"},{default:(0,r.k6)(()=>o[4]||(o[4]=[(0,r.eW)("Recomendações")])),_:1,__:[4]})]),n.isAuth?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("li",m,[(0,r.bF)(h,{to:"/login"},{default:(0,r.k6)(()=>o[5]||(o[5]=[(0,r.eW)("Entrar")])),_:1,__:[5]})])),n.isAuth?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("li",p,[(0,r.bF)(h,{to:"/register"},{default:(0,r.k6)(()=>o[6]||(o[6]=[(0,r.eW)("Cadastrar")])),_:1,__:[6]})])),o[7]||(o[7]=(0,r.Lk)("li",null,[(0,r.Lk)("a",{href:"#contato"},"Contato")],-1))])]),n.isAuth?((0,r.uX)(),(0,r.CE)("div",f,[(0,r.Lk)("button",{class:"profile-btn",onClick:o[0]||(o[0]=(...e)=>n.toggle&&n.toggle(...e))},(0,i.v_)(n.userName)+" ▾ ",1),(0,r.Lk)("div",{class:(0,i.C4)(["dropdown-content",{show:n.open}])},[(0,r.bF)(h,{to:"/recomendacoes"},{default:(0,r.k6)(()=>o[8]||(o[8]=[(0,r.eW)("Recomendações")])),_:1,__:[8]}),(0,r.bF)(h,{to:"/meus-anuncios"},{default:(0,r.k6)(()=>o[9]||(o[9]=[(0,r.eW)("Meus Anúncios")])),_:1,__:[9]}),(0,r.Lk)("button",{class:"profile-btn",onClick:o[1]||(o[1]=(...e)=>n.doLogout&&n.doLogout(...e))},"Sair")],2)])):(0,r.Q3)("",!0)])])}t(4114);var v=t(953),b=t(5220),k={name:"HeaderNav",setup(){const e=(0,v.KR)(!1),o=(0,b.rd)(),t=(0,r.EW)(()=>{try{return JSON.parse(localStorage.getItem("user"))||{}}catch{return{}}}),n=(0,r.EW)(()=>t.value.nome||""),a=(0,r.EW)(()=>!!t.value.id),s=()=>{e.value=!e.value},i=()=>{localStorage.removeItem("user"),o.push("/login")};return{open:e,isAuth:a,userName:n,toggle:s,doLogout:i}}},g=t(6262);const L=(0,g.A)(k,[["render",h]]);var y=L;const _={id:"contato",class:"contact-section"};function E(e,o,t,n,a,s){return(0,r.uX)(),(0,r.CE)("section",_,o[0]||(o[0]=[(0,r.Lk)("div",{class:"container"},[(0,r.Lk)("h2",null,"Contato"),(0,r.Lk)("p",null,"Email: contato@bookshare.com")],-1)]))}var S={name:"ContactSection"};const A=(0,g.A)(S,[["render",E]]);var C=A,w={name:"App",components:{HeaderNav:y,ContactSection:C}};const X=(0,g.A)(w,[["render",s]]);var F=X;const V={id:"vender",class:"sell-book"},N={class:"container"},O={key:0,class:"success"};function R(e,o,t,a,s,u){return(0,r.uX)(),(0,r.CE)("section",null,[o[9]||(o[9]=(0,r.Fv)('<section id="home" class="hero" data-v-691a66f3><div class="container" data-v-691a66f3><h2 data-v-691a66f3>Encontre livros usados a preços acessíveis</h2><form class="search-form" data-v-691a66f3><input type="search" placeholder="Título, autor ou ISBN" data-v-691a66f3><button type="submit" data-v-691a66f3>Buscar</button></form></div></section><section id="recomendacoes" class="catalog" data-v-691a66f3><div class="container" data-v-691a66f3><h2 data-v-691a66f3>Recomendações</h2><div class="book-grid" data-v-691a66f3></div></div></section>',2)),(0,r.Lk)("section",V,[(0,r.Lk)("div",N,[o[8]||(o[8]=(0,r.Lk)("h2",null,"Vender seu livro",-1)),(0,r.Lk)("form",{class:"sell-form",onSubmit:o[3]||(o[3]=(0,n.D$)((...e)=>u.onSubmit&&u.onSubmit(...e),["prevent"]))},[(0,r.Lk)("label",null,[o[4]||(o[4]=(0,r.eW)("Título")),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.title=e),required:""},null,512),[[n.Jo,s.form.title]])]),(0,r.Lk)("label",null,[o[5]||(o[5]=(0,r.eW)("Autor")),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.author=e)},null,512),[[n.Jo,s.form.author]])]),(0,r.Lk)("label",null,[o[6]||(o[6]=(0,r.eW)("Preço (R$)")),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.price=e),type:"number",step:"0.01",required:""},null,512),[[n.Jo,s.form.price,void 0,{number:!0}]])]),o[7]||(o[7]=(0,r.Lk)("button",{class:"btn",type:"submit"},"Publicar Anúncio",-1))],32),s.successMessage?((0,r.uX)(),(0,r.CE)("p",O,(0,i.v_)(s.successMessage),1)):(0,r.Q3)("",!0)])])])}var U=t(4335);const J=U.A.create({baseURL:"http://localhost:3000/api/announcements"}),P=e=>J.get(`/mine/${e}`),B=(e,o)=>J.post("/",{id_livro:e,id_usuario:o});var W={name:"HomeView",data(){return{form:{title:"",author:"",price:null},successMessage:""}},methods:{async onSubmit(){try{const e=JSON.parse(localStorage.getItem("user"));await B("...",e.id),this.successMessage="Anúncio publicado!",this.form={title:"",author:"",price:null},setTimeout(()=>this.successMessage="",3e3)}catch(e){console.error(e),alert("Falha ao publicar.")}}}};const j=(0,g.A)(W,[["render",R],["__scopeId","data-v-691a66f3"]]);var I=j;const M={class:"container"},q={key:0},$={key:1};function T(e,o,t,n,a,s){const u=(0,r.g2)("AddBookForm");return(0,r.uX)(),(0,r.CE)("section",M,[o[0]||(o[0]=(0,r.Lk)("h2",null,"Livros Cadastrados",-1)),(0,r.bF)(u,{onBookAdded:s.loadBooks},null,8,["onBookAdded"]),a.books.length?((0,r.uX)(),(0,r.CE)("ul",q,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.books,e=>((0,r.uX)(),(0,r.CE)("li",{key:e._id},(0,i.v_)(e.title)+" — R$ "+(0,i.v_)(e.price.toFixed(2)),1))),128))])):((0,r.uX)(),(0,r.CE)("p",$,"Nenhum livro encontrado."))])}function x(e,o,t,a,s,i){return(0,r.uX)(),(0,r.CE)("form",{onSubmit:o[4]||(o[4]=(0,n.D$)((...e)=>i.onSubmit&&i.onSubmit(...e),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.title=e),placeholder:"Título",required:""},null,512),[[n.Jo,s.form.title]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.author=e),placeholder:"Autor"},null,512),[[n.Jo,s.form.author]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.price=e),type:"number",placeholder:"Preço"},null,512),[[n.Jo,s.form.price,void 0,{number:!0}]]),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.form.condition=e)},o[5]||(o[5]=[(0,r.Lk)("option",{value:"novo"},"Novo",-1),(0,r.Lk)("option",{value:"usado"},"Usado",-1)]),512),[[n.u1,s.form.condition]]),o[6]||(o[6]=(0,r.Lk)("button",{type:"submit"},"Adicionar Livro",-1))],32)}const Q=U.A.create({baseURL:{NODE_ENV:"production",BASE_URL:"/Site-Projeto-2/"}.VUE_APP_BASE_URL||"http://localhost:3000/api/books"}),D=()=>Q.get("/"),H=e=>Q.post("/",e);var K={name:"AddBookForm",data(){return{form:{title:"",author:"",price:0,condition:"usado"}}},methods:{async onSubmit(){try{await H(this.form),this.$emit("book-added"),this.form={title:"",author:"",price:0,condition:"usado"}}catch(e){console.error("Erro ao adicionar:",e)}}}};const z=(0,g.A)(K,[["render",x]]);var G=z,Y={components:{AddBookForm:G},data(){return{books:[]}},async created(){this.loadBooks()},methods:{async loadBooks(){const e=await D();this.books=e.data}}};const Z=(0,g.A)(Y,[["render",T]]);var ee=Z;const oe={class:"container"},te={key:0},ne={key:1};function re(e,o,t,n,a,s){return(0,r.uX)(),(0,r.CE)("section",oe,[o[0]||(o[0]=(0,r.Lk)("h2",null,"Meus Anúncios",-1)),a.anuncios.length?((0,r.uX)(),(0,r.CE)("ul",te,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.anuncios,e=>((0,r.uX)(),(0,r.CE)("li",{key:e._id}," Livro: "+(0,i.v_)(e.id_livro.titulo)+" — Status: "+(0,i.v_)(e.status),1))),128))])):((0,r.uX)(),(0,r.CE)("p",ne,"Você ainda não publicou anúncios."))])}var ae={name:"MeusAnunciosView",data(){return{anuncios:[]}},async created(){const e=JSON.parse(localStorage.getItem("user")),o=await P(e.id);this.anuncios=o.data}};const se=(0,g.A)(ae,[["render",re]]);var ie=se;const ue={class:"container"};function ce(e,o,t,n,a,s){return(0,r.uX)(),(0,r.CE)("section",ue,o[0]||(o[0]=[(0,r.Lk)("h2",null,"Negociações Passadas",-1),(0,r.Lk)("p",null,"Registros de todas as suas trocas e vendas concluídas.",-1)]))}var le={name:"NegociacoesView"};const de=(0,g.A)(le,[["render",ce]]);var me=de;const pe={class:"container"};function fe(e,o,t,n,a,s){return(0,r.uX)(),(0,r.CE)("section",pe)}var he={name:"RecomendacoesView"};const ve=(0,g.A)(he,[["render",fe]]);var be=ve;const ke={class:"container"},ge={key:0};function Le(e,o,t,a,s,u){return(0,r.uX)(),(0,r.CE)("section",ke,[o[4]||(o[4]=(0,r.Lk)("h2",null,"Login",-1)),(0,r.Lk)("form",{onSubmit:o[2]||(o[2]=(0,n.D$)((...e)=>u.doLogin&&u.doLogin(...e),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.email=e),type:"email",placeholder:"Email",required:""},null,512),[[n.Jo,s.form.email]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.senha=e),type:"password",placeholder:"Senha",required:""},null,512),[[n.Jo,s.form.senha]]),o[3]||(o[3]=(0,r.Lk)("button",{class:"btn",type:"submit"},"Entrar",-1))],32),s.error?((0,r.uX)(),(0,r.CE)("p",ge,(0,i.v_)(s.error),1)):(0,r.Q3)("",!0)])}const ye=U.A.create({baseURL:"http://localhost:3000/api/auth"}),_e=e=>ye.post("/register",e),Ee=e=>ye.post("/login",e);var Se={name:"LoginView",data(){return{form:{email:"",senha:""},error:""}},methods:{async doLogin(){try{const e=await Ee(this.form);localStorage.setItem("user",JSON.stringify(e.data)),this.$router.push("/")}catch(e){this.error=e.response?.data?.error||"Falha no login"}}}};const Ae=(0,g.A)(Se,[["render",Le]]);var Ce=Ae;const we={class:"container"},Xe={key:0};function Fe(e,o,t,a,s,u){return(0,r.uX)(),(0,r.CE)("section",we,[o[5]||(o[5]=(0,r.Lk)("h2",null,"Cadastro",-1)),(0,r.Lk)("form",{onSubmit:o[3]||(o[3]=(0,n.D$)((...e)=>u.doRegister&&u.doRegister(...e),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.nome=e),placeholder:"Nome",required:""},null,512),[[n.Jo,s.form.nome]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.email=e),type:"email",placeholder:"Email",required:""},null,512),[[n.Jo,s.form.email]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.senha=e),type:"password",placeholder:"Senha",required:""},null,512),[[n.Jo,s.form.senha]]),o[4]||(o[4]=(0,r.Lk)("button",{class:"btn",type:"submit"},"Cadastrar",-1))],32),s.error?((0,r.uX)(),(0,r.CE)("p",Xe,(0,i.v_)(s.error),1)):(0,r.Q3)("",!0)])}var Ve={name:"RegisterView",data(){return{form:{nome:"",email:"",senha:""},error:""}},methods:{async doRegister(){try{await _e(this.form),this.$router.push("/login")}catch(e){this.error=e.response?.data?.error||"Falha no cadastro"}}}};const Ne=(0,g.A)(Ve,[["render",Fe]]);var Oe=Ne;const Re=[{path:"/",name:"Home",component:I},{path:"/procurados",name:"Procurados",component:ee},{path:"/meus-anuncios",name:"MeusAnuncios",component:ie,meta:{requiresAuth:!0}},{path:"/negociacoes",name:"Negociacoes",component:me},{path:"/recomendacoes",name:"Recomendacoes",component:be},{path:"/login",name:"Login",component:Ce},{path:"/register",name:"Register",component:Oe}],Ue=(0,b.aE)({history:(0,b.LA)(),routes:Re});Ue.beforeEach((e,o,t)=>{const n=!!JSON.parse(localStorage.getItem("user")||"null");if(e.meta.requiresAuth&&!n)return t("/login");t()});var Je=Ue;const Pe=(0,n.Ef)(F);Pe.use(Je),Pe.mount("#app")}},o={};function t(n){var r=o[n];if(void 0!==r)return r.exports;var a=o[n]={exports:{}};return e[n].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(o,n,r,a){if(!n){var s=1/0;for(l=0;l<e.length;l++){n=e[l][0],r=e[l][1],a=e[l][2];for(var i=!0,u=0;u<n.length;u++)(!1&a||s>=a)&&Object.keys(t.O).every(function(e){return t.O[e](n[u])})?n.splice(u--,1):(i=!1,a<s&&(s=a));if(i){e.splice(l--,1);var c=r();void 0!==c&&(o=c)}}return o}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[n,r,a]}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(o){return 0===e[o]};var o=function(o,n){var r,a,s=n[0],i=n[1],u=n[2],c=0;if(s.some(function(o){return 0!==e[o]})){for(r in i)t.o(i,r)&&(t.m[r]=i[r]);if(u)var l=u(t)}for(o&&o(n);c<s.length;c++)a=s[c],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(l)},n=self["webpackChunkSite_Projeto_2"]=self["webpackChunkSite_Projeto_2"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],function(){return t(2489)});n=t.O(n)})();
//# sourceMappingURL=app.3c111527.js.map