(function(){"use strict";var e={5086:function(e,o,n){var r=n(3751),t=n(641);const a={id:"app"};function s(e,o,n,r,s,i){const u=(0,t.g2)("HeaderNav"),l=(0,t.g2)("router-view"),c=(0,t.g2)("ContactSection");return(0,t.uX)(),(0,t.CE)("div",a,[(0,t.bF)(u),(0,t.bF)(l),(0,t.bF)(c)])}n(4114);var i=n(33),u=n(953),l=n(5220);const c={class:"site-header"},d={class:"container header-inner"},m={class:"logo"},p={class:"nav-list"},h={key:0},v={key:1},f={key:0,class:"profile-menu"};var k={__name:"HeaderNav",setup(e){const o=(0,u.KR)(!1),n=(0,u.KR)(JSON.parse(localStorage.getItem("user")||"null")),r=(0,l.rd)(),a=(0,t.EW)(()=>!!n.value?.id),s=(0,t.EW)(()=>n.value?.nome||"");function k(){o.value=!o.value}function b(){localStorage.removeItem("user"),window.dispatchEvent(new Event("logout")),r.push("/login")}function g(){n.value=JSON.parse(localStorage.getItem("user")||"null")}function L(){n.value=null}return(0,t.sV)(()=>{window.addEventListener("login",g),window.addEventListener("logout",L)}),(0,t.xo)(()=>{window.removeEventListener("login",g),window.removeEventListener("logout",L)}),(e,n)=>{const r=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("header",c,[(0,t.Lk)("div",d,[(0,t.Lk)("h1",m,[(0,t.bF)(r,{to:"/"},{default:(0,t.k6)(()=>n[0]||(n[0]=[(0,t.eW)("BookShare")])),_:1,__:[0]})]),(0,t.Lk)("nav",null,[(0,t.Lk)("ul",p,[(0,t.Lk)("li",null,[(0,t.bF)(r,{to:"/"},{default:(0,t.k6)(()=>n[1]||(n[1]=[(0,t.eW)("Início")])),_:1,__:[1]})]),(0,t.Lk)("li",null,[(0,t.bF)(r,{to:"/recomendacoes"},{default:(0,t.k6)(()=>n[2]||(n[2]=[(0,t.eW)("Recomendações")])),_:1,__:[2]})]),a.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("li",h,[(0,t.bF)(r,{to:"/login"},{default:(0,t.k6)(()=>n[3]||(n[3]=[(0,t.eW)("Entrar")])),_:1,__:[3]})])),a.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("li",v,[(0,t.bF)(r,{to:"/register"},{default:(0,t.k6)(()=>n[4]||(n[4]=[(0,t.eW)("Cadastrar")])),_:1,__:[4]})])),n[5]||(n[5]=(0,t.Lk)("li",null,[(0,t.Lk)("a",{href:"#contato"},"Contato")],-1))])]),a.value?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.Lk)("button",{class:"profile-btn",onClick:k},(0,i.v_)(s.value)+" ▾ ",1),(0,t.Lk)("div",{class:(0,i.C4)(["dropdown-content",{show:o.value}])},[(0,t.bF)(r,{to:"/recomendacoes"},{default:(0,t.k6)(()=>n[6]||(n[6]=[(0,t.eW)("Recomendações")])),_:1,__:[6]}),(0,t.bF)(r,{to:"/meus-anuncios"},{default:(0,t.k6)(()=>n[7]||(n[7]=[(0,t.eW)("Meus Anúncios")])),_:1,__:[7]}),(0,t.Lk)("button",{class:"profile-btn",onClick:b},"Sair")],2)])):(0,t.Q3)("",!0)])])}}};const b=k;var g=b;const L={id:"contato",class:"contact-section"};function _(e,o,n,r,a,s){return(0,t.uX)(),(0,t.CE)("section",L,o[0]||(o[0]=[(0,t.Lk)("div",{class:"container"},[(0,t.Lk)("h2",null,"Contato"),(0,t.Lk)("p",null,"Email: contato@bookshare.com")],-1)]))}var E={name:"ContactSection"},y=n(6262);const S=(0,y.A)(E,[["render",_]]);var C=S,w={name:"App",components:{HeaderNav:g,ContactSection:C}};const A=(0,y.A)(w,[["render",s]]);var X=A;const V={id:"home",class:"hero"},F={class:"container"},M={id:"vender",class:"sell-book"},N={class:"container"},O={key:0,class:"success"},R={key:1,class:"error"};function U(e,o,n,a,s,u){return(0,t.uX)(),(0,t.CE)("section",null,[(0,t.Lk)("section",V,[(0,t.Lk)("div",F,[o[7]||(o[7]=(0,t.Lk)("h2",null,"Encontre livros usados a preços acessíveis",-1)),(0,t.Lk)("form",{class:"search-form","aria-label":"Buscar livros",onSubmit:o[1]||(o[1]=(0,r.D$)((...e)=>u.onSearch&&u.onSearch(...e),["prevent"]))},[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.searchTerm=e),type:"search",placeholder:"Título, autor ou ISBN"},null,512),[[r.Jo,s.searchTerm]]),o[6]||(o[6]=(0,t.Lk)("button",{type:"submit"},"Buscar",-1))],32)])]),(0,t.Lk)("section",M,[(0,t.Lk)("div",N,[o[12]||(o[12]=(0,t.Lk)("h2",null,"Vender seu livro",-1)),(0,t.Lk)("form",{class:"sell-form",onSubmit:o[5]||(o[5]=(0,r.D$)((...e)=>u.onSubmit&&u.onSubmit(...e),["prevent"]))},[(0,t.Lk)("label",null,[o[8]||(o[8]=(0,t.eW)(" Título ")),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.title=e),required:""},null,512),[[r.Jo,s.form.title]])]),(0,t.Lk)("label",null,[o[9]||(o[9]=(0,t.eW)(" Autor ")),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.form.author=e)},null,512),[[r.Jo,s.form.author]])]),(0,t.Lk)("label",null,[o[10]||(o[10]=(0,t.eW)(" Preço (R$) ")),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>s.form.price=e),type:"number",step:"0.01",required:""},null,512),[[r.Jo,s.form.price,void 0,{number:!0}]])]),o[11]||(o[11]=(0,t.Lk)("button",{class:"btn",type:"submit"},"Publicar Anúncio",-1))],32),s.successMessage?((0,t.uX)(),(0,t.CE)("p",O,(0,i.v_)(s.successMessage),1)):(0,t.Q3)("",!0),s.errorMessage?((0,t.uX)(),(0,t.CE)("p",R,(0,i.v_)(s.errorMessage),1)):(0,t.Q3)("",!0)])])])}var J=n(4335);const B=J.A.create({baseURL:{NODE_ENV:"production",BASE_URL:"/Site-novo-db/"}.VUE_APP_BASE_URL||"http://localhost:3000/books"}),I=()=>B.get("/"),P=e=>B.post("/",e),T=J.A.create({baseURL:"http://localhost:3000/announcements"}),W=()=>T.get("/"),$=e=>T.get(`/mine/${e}`),j=(e,o)=>T.post("/",{id_livro:e,id_usuario:o});var q={name:"HomeView",data(){return{searchTerm:"",form:{title:"",author:"",price:null},successMessage:"",errorMessage:""}},methods:{onSearch(){console.log("Buscando por:",this.searchTerm)},async onSubmit(){this.errorMessage="",this.successMessage="";try{const e=JSON.parse(localStorage.getItem("user")),o=await P({titulo:this.form.title,autor:this.form.author,preco:this.form.price,id_vendedor:e.id}),n=o.data._id;await j(n,e.id),this.successMessage="Anúncio publicado com sucesso!",this.form={title:"",author:"",price:null},setTimeout(()=>this.successMessage="",3e3)}catch(e){console.error("Erro ao publicar anúncio",{status:e.response?.status,data:e.response?.data,message:e.message}),this.errorMessage=e.response?.data?.error||"Falha ao publicar o anúncio."}}}};const Q=(0,y.A)(q,[["render",U],["__scopeId","data-v-bc94db36"]]);var x=Q;const D={class:"container"},H={key:0},K={key:1};function z(e,o,n,r,a,s){const u=(0,t.g2)("AddBookForm");return(0,t.uX)(),(0,t.CE)("section",D,[o[0]||(o[0]=(0,t.Lk)("h2",null,"Livros Cadastrados",-1)),(0,t.bF)(u,{onBookAdded:s.loadBooks},null,8,["onBookAdded"]),a.books.length?((0,t.uX)(),(0,t.CE)("ul",H,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.books,e=>((0,t.uX)(),(0,t.CE)("li",{key:e._id},(0,i.v_)(e.title)+" — R$ "+(0,i.v_)(e.price.toFixed(2)),1))),128))])):((0,t.uX)(),(0,t.CE)("p",K,"Nenhum livro encontrado."))])}function G(e,o,n,a,s,i){return(0,t.uX)(),(0,t.CE)("form",{onSubmit:o[4]||(o[4]=(0,r.D$)((...e)=>i.onSubmit&&i.onSubmit(...e),["prevent"]))},[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.title=e),placeholder:"Título",required:""},null,512),[[r.Jo,s.form.title]]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.author=e),placeholder:"Autor"},null,512),[[r.Jo,s.form.author]]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.price=e),type:"number",placeholder:"Preço"},null,512),[[r.Jo,s.form.price,void 0,{number:!0}]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.form.condition=e)},o[5]||(o[5]=[(0,t.Lk)("option",{value:"novo"},"Novo",-1),(0,t.Lk)("option",{value:"usado"},"Usado",-1)]),512),[[r.u1,s.form.condition]]),o[6]||(o[6]=(0,t.Lk)("button",{type:"submit"},"Adicionar Livro",-1))],32)}var Y={name:"AddBookForm",data(){return{form:{title:"",author:"",price:0,condition:"usado"}}},methods:{async onSubmit(){try{await P(this.form),this.$emit("book-added"),this.form={title:"",author:"",price:0,condition:"usado"}}catch(e){console.error("Erro ao adicionar:",e)}}}};const Z=(0,y.A)(Y,[["render",G]]);var ee=Z,oe={components:{AddBookForm:ee},data(){return{books:[]}},async created(){this.loadBooks()},methods:{async loadBooks(){const e=await I();this.books=e.data}}};const ne=(0,y.A)(oe,[["render",z]]);var re=ne;const te={class:"container"},ae={key:0},se={key:1};function ie(e,o,n,r,a,s){return(0,t.uX)(),(0,t.CE)("section",te,[o[0]||(o[0]=(0,t.Lk)("h2",null,"Meus Anúncios",-1)),a.anuncios.length?((0,t.uX)(),(0,t.CE)("ul",ae,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.anuncios,e=>((0,t.uX)(),(0,t.CE)("li",{key:e._id}," Livro: "+(0,i.v_)(e.id_livro.titulo)+" — Status: "+(0,i.v_)(e.status),1))),128))])):((0,t.uX)(),(0,t.CE)("p",se,"Você ainda não publicou anúncios."))])}var ue={name:"MeusAnunciosView",data(){return{anuncios:[]}},async created(){const e=JSON.parse(localStorage.getItem("user")),o=await $(e.id);this.anuncios=o.data}};const le=(0,y.A)(ue,[["render",ie]]);var ce=le;const de={class:"container"};function me(e,o,n,r,a,s){return(0,t.uX)(),(0,t.CE)("section",de,o[0]||(o[0]=[(0,t.Lk)("h2",null,"Negociações Passadas",-1),(0,t.Lk)("p",null,"Registros de todas as suas trocas e vendas concluídas.",-1)]))}var pe={name:"NegociacoesView"};const he=(0,y.A)(pe,[["render",me]]);var ve=he;const fe={class:"recomendacoes container"},ke={key:0,class:"error"},be={class:"book-grid"},ge={key:0};function Le(e,o,n,r,a,s){return(0,t.uX)(),(0,t.CE)("section",fe,[o[0]||(o[0]=(0,t.Lk)("h2",null,"Recomendações",-1)),a.errorMessage?((0,t.uX)(),(0,t.CE)("div",ke,(0,i.v_)(a.errorMessage),1)):(0,t.Q3)("",!0),(0,t.Lk)("div",be,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.recommendations,e=>((0,t.uX)(),(0,t.CE)("div",{key:e._id,class:"card"},[(0,t.Lk)("h3",null,(0,i.v_)(e.livro.titulo),1),(0,t.Lk)("p",null,"Autor: "+(0,i.v_)(e.livro.autor),1),(0,t.Lk)("p",null,"Preço: R$ "+(0,i.v_)(e.livro.preco.toFixed(2)),1),(0,t.Lk)("p",null,"Vendedor: "+(0,i.v_)(e.vendedor?.nome||"Desconhecido"),1)]))),128)),a.recommendations.length||a.errorMessage?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("p",ge," Nenhum anúncio disponível no momento. "))])])}n(8111),n(2489),n(1701);var _e={name:"RecomendacoesView",data(){return{recommendations:[],errorMessage:""}},async created(){const e=JSON.parse(localStorage.getItem("user")||"{}");try{const o=await W();this.recommendations=o.data.filter(o=>o.id_usuario!==e.id).map(e=>({...e,livro:e.id_livro,vendedor:e.id_usuario}))}catch(o){console.error("Erro ao carregar recomendações:",o),this.errorMessage=o.response?.data?.error||"Não foi possível carregar as recomendações."}}};const Ee=(0,y.A)(_e,[["render",Le],["__scopeId","data-v-45de6e75"]]);var ye=Ee;const Se={class:"container"},Ce={key:0};function we(e,o,n,a,s,u){return(0,t.uX)(),(0,t.CE)("section",Se,[o[4]||(o[4]=(0,t.Lk)("h2",null,"Login",-1)),(0,t.Lk)("form",{onSubmit:o[2]||(o[2]=(0,r.D$)((...e)=>u.doLogin&&u.doLogin(...e),["prevent"]))},[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.email=e),type:"email",placeholder:"Email",required:""},null,512),[[r.Jo,s.form.email]]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.senha=e),type:"password",placeholder:"Senha",required:""},null,512),[[r.Jo,s.form.senha]]),o[3]||(o[3]=(0,t.Lk)("button",{class:"btn",type:"submit"},"Entrar",-1))],32),s.error?((0,t.uX)(),(0,t.CE)("p",Ce,(0,i.v_)(s.error),1)):(0,t.Q3)("",!0)])}const Ae=J.A.create({baseURL:"http://localhost:3000/auth"}),Xe=e=>Ae.post("/register",e),Ve=e=>Ae.post("/login",e);var Fe={name:"LoginView",data(){return{form:{email:"",senha:""},error:""}},methods:{async doLogin(){try{const e=await Ve(this.form);localStorage.setItem("user",JSON.stringify(e.data)),window.dispatchEvent(new Event("login")),this.$router.push("/")}catch(e){this.error=e.response?.data?.error||"Falha no login"}}}};const Me=(0,y.A)(Fe,[["render",we]]);var Ne=Me;const Oe={class:"container"},Re={key:0};function Ue(e,o,n,a,s,u){return(0,t.uX)(),(0,t.CE)("section",Oe,[o[5]||(o[5]=(0,t.Lk)("h2",null,"Cadastro",-1)),(0,t.Lk)("form",{onSubmit:o[3]||(o[3]=(0,r.D$)((...e)=>u.doRegister&&u.doRegister(...e),["prevent"]))},[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.nome=e),placeholder:"Nome",required:""},null,512),[[r.Jo,s.form.nome]]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.email=e),type:"email",placeholder:"Email",required:""},null,512),[[r.Jo,s.form.email]]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.senha=e),type:"password",placeholder:"Senha",required:""},null,512),[[r.Jo,s.form.senha]]),o[4]||(o[4]=(0,t.Lk)("button",{class:"btn",type:"submit"},"Cadastrar",-1))],32),s.error?((0,t.uX)(),(0,t.CE)("p",Re,(0,i.v_)(s.error),1)):(0,t.Q3)("",!0)])}var Je={name:"RegisterView",data(){return{form:{nome:"",email:"",senha:""},error:""}},methods:{async doRegister(){try{await Xe(this.form),this.$router.push("/login")}catch(e){this.error=e.response?.data?.error||"Falha no cadastro"}}}};const Be=(0,y.A)(Je,[["render",Ue]]);var Ie=Be;const Pe=[{path:"/",name:"Home",component:x},{path:"/procurados",name:"Procurados",component:re},{path:"/meus-anuncios",name:"MeusAnuncios",component:ce,meta:{requiresAuth:!0}},{path:"/negociacoes",name:"Negociacoes",component:ve},{path:"/recomendacoes",name:"Recomendacoes",component:ye},{path:"/login",name:"Login",component:Ne},{path:"/register",name:"Register",component:Ie}],Te=(0,l.aE)({history:(0,l.Bt)("/Site-novo-db/"),routes:Pe});Te.beforeEach((e,o,n)=>{const r=!!JSON.parse(localStorage.getItem("user")||"null");if(e.meta.requiresAuth&&!r)return n("/login");n()});var We=Te;const $e=(0,r.Ef)(X);$e.use(We),$e.mount("#app")}},o={};function n(r){var t=o[r];if(void 0!==t)return t.exports;var a=o[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(o,r,t,a){if(!r){var s=1/0;for(c=0;c<e.length;c++){r=e[c][0],t=e[c][1],a=e[c][2];for(var i=!0,u=0;u<r.length;u++)(!1&a||s>=a)&&Object.keys(n.O).every(function(e){return n.O[e](r[u])})?r.splice(u--,1):(i=!1,a<s&&(s=a));if(i){e.splice(c--,1);var l=t();void 0!==l&&(o=l)}}return o}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,t,a]}}(),function(){n.d=function(e,o){for(var r in o)n.o(o,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(o){return 0===e[o]};var o=function(o,r){var t,a,s=r[0],i=r[1],u=r[2],l=0;if(s.some(function(o){return 0!==e[o]})){for(t in i)n.o(i,t)&&(n.m[t]=i[t]);if(u)var c=u(n)}for(o&&o(r);l<s.length;l++)a=s[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},r=self["webpackChunkSite_Projeto_2"]=self["webpackChunkSite_Projeto_2"]||[];r.forEach(o.bind(null,0)),r.push=o.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],function(){return n(5086)});r=n.O(r)})();
//# sourceMappingURL=app.5d1932e4.js.map