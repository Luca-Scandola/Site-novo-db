(function(){"use strict";var e={7372:function(e,o,r){var t=r(3751),n=r(641);const a={id:"app"};function s(e,o,r,t,s,i){const u=(0,n.g2)("HeaderNav"),l=(0,n.g2)("router-view"),c=(0,n.g2)("ContactSection");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.bF)(u),(0,n.bF)(l),(0,n.bF)(c)])}r(4114);var i=r(33),u=r(953),l=r(5220);const c={class:"site-header"},d={class:"container header-inner"},m={class:"logo"},p={class:"nav-list"},h={key:0},v={key:1},f={key:0,class:"profile-menu"};var k={__name:"HeaderNav",setup(e){const o=(0,u.KR)(!1),r=(0,u.KR)(JSON.parse(localStorage.getItem("user")||"null")),t=(0,l.rd)(),a=(0,n.EW)(()=>!!r.value?.id),s=(0,n.EW)(()=>r.value?.nome||"");function k(){o.value=!o.value}function b(){localStorage.removeItem("user"),window.dispatchEvent(new Event("logout")),t.push("/login")}function g(){r.value=JSON.parse(localStorage.getItem("user")||"null")}function L(){r.value=null}return(0,n.sV)(()=>{window.addEventListener("login",g),window.addEventListener("logout",L)}),(0,n.xo)(()=>{window.removeEventListener("login",g),window.removeEventListener("logout",L)}),(e,r)=>{const t=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("header",c,[(0,n.Lk)("div",d,[(0,n.Lk)("h1",m,[(0,n.bF)(t,{to:"/"},{default:(0,n.k6)(()=>r[0]||(r[0]=[(0,n.eW)("BookShare")])),_:1,__:[0]})]),(0,n.Lk)("nav",null,[(0,n.Lk)("ul",p,[(0,n.Lk)("li",null,[(0,n.bF)(t,{to:"/"},{default:(0,n.k6)(()=>r[1]||(r[1]=[(0,n.eW)("Início")])),_:1,__:[1]})]),(0,n.Lk)("li",null,[(0,n.bF)(t,{to:"/recomendacoes"},{default:(0,n.k6)(()=>r[2]||(r[2]=[(0,n.eW)("Recomendações")])),_:1,__:[2]})]),a.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("li",h,[(0,n.bF)(t,{to:"/login"},{default:(0,n.k6)(()=>r[3]||(r[3]=[(0,n.eW)("Entrar")])),_:1,__:[3]})])),a.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("li",v,[(0,n.bF)(t,{to:"/register"},{default:(0,n.k6)(()=>r[4]||(r[4]=[(0,n.eW)("Cadastrar")])),_:1,__:[4]})])),r[5]||(r[5]=(0,n.Lk)("li",null,[(0,n.Lk)("a",{href:"#contato"},"Contato")],-1))])]),a.value?((0,n.uX)(),(0,n.CE)("div",f,[(0,n.Lk)("button",{class:"profile-btn",onClick:k},(0,i.v_)(s.value)+" ▾ ",1),(0,n.Lk)("div",{class:(0,i.C4)(["dropdown-content",{show:o.value}])},[(0,n.bF)(t,{to:"/recomendacoes"},{default:(0,n.k6)(()=>r[6]||(r[6]=[(0,n.eW)("Recomendações")])),_:1,__:[6]}),(0,n.bF)(t,{to:"/meus-anuncios"},{default:(0,n.k6)(()=>r[7]||(r[7]=[(0,n.eW)("Meus Anúncios")])),_:1,__:[7]}),(0,n.Lk)("button",{class:"profile-btn",onClick:b},"Sair")],2)])):(0,n.Q3)("",!0)])])}}};const b=k;var g=b;const L={id:"contato",class:"contact-section"};function _(e,o,r,t,a,s){return(0,n.uX)(),(0,n.CE)("section",L,o[0]||(o[0]=[(0,n.Lk)("div",{class:"container"},[(0,n.Lk)("h2",null,"Contato"),(0,n.Lk)("p",null,"Email: contato@bookshare.com")],-1)]))}var y={name:"ContactSection"},E=r(6262);const S=(0,E.A)(y,[["render",_]]);var C=S,w={name:"App",components:{HeaderNav:g,ContactSection:C}};const A=(0,E.A)(w,[["render",s]]);var X=A;const F={id:"home",class:"hero"},M={class:"container"},R={id:"vender",class:"sell-book"},V={class:"container"},O={key:0,class:"success"},J={key:1,class:"error"};function N(e,o,r,a,s,u){return(0,n.uX)(),(0,n.CE)("section",null,[(0,n.Lk)("section",F,[(0,n.Lk)("div",M,[o[7]||(o[7]=(0,n.Lk)("h2",null,"Encontre livros usados a preços acessíveis",-1)),(0,n.Lk)("form",{class:"search-form","aria-label":"Buscar livros",onSubmit:o[1]||(o[1]=(0,t.D$)((...e)=>u.onSearch&&u.onSearch(...e),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.searchTerm=e),type:"search",placeholder:"Título, autor ou ISBN"},null,512),[[t.Jo,s.searchTerm]]),o[6]||(o[6]=(0,n.Lk)("button",{type:"submit"},"Buscar",-1))],32)])]),(0,n.Lk)("section",R,[(0,n.Lk)("div",V,[o[12]||(o[12]=(0,n.Lk)("h2",null,"Vender seu livro",-1)),(0,n.Lk)("form",{class:"sell-form",onSubmit:o[5]||(o[5]=(0,t.D$)((...e)=>u.onSubmit&&u.onSubmit(...e),["prevent"]))},[(0,n.Lk)("label",null,[o[8]||(o[8]=(0,n.eW)(" Título ")),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.title=e),required:""},null,512),[[t.Jo,s.form.title]])]),(0,n.Lk)("label",null,[o[9]||(o[9]=(0,n.eW)(" Autor ")),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.form.author=e)},null,512),[[t.Jo,s.form.author]])]),(0,n.Lk)("label",null,[o[10]||(o[10]=(0,n.eW)(" Preço (R$) ")),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>s.form.price=e),type:"number",step:"0.01",required:""},null,512),[[t.Jo,s.form.price,void 0,{number:!0}]])]),o[11]||(o[11]=(0,n.Lk)("button",{class:"btn",type:"submit"},"Publicar Anúncio",-1))],32),s.successMessage?((0,n.uX)(),(0,n.CE)("p",O,(0,i.v_)(s.successMessage),1)):(0,n.Q3)("",!0),s.errorMessage?((0,n.uX)(),(0,n.CE)("p",J,(0,i.v_)(s.errorMessage),1)):(0,n.Q3)("",!0)])])])}var U=r(4335);const I=U.A.create({baseURL:"http://localhost:3000/books"}),B=()=>I.get("/"),P=e=>I.post("/",e),T=U.A.create({baseURL:"http://localhost:3000/announcements"}),W=()=>T.get("/"),$=e=>T.get(`/mine/${e}`),j=(e,o)=>T.post("/",{id_livro:e,id_usuario:o});var q={name:"HomeView",data(){return{searchTerm:"",form:{title:"",author:"",price:null},successMessage:"",errorMessage:""}},methods:{onSearch(){console.log("Buscando por:",this.searchTerm)},async onSubmit(){this.errorMessage="",this.successMessage="";try{const e=JSON.parse(localStorage.getItem("user")),o=await P({titulo:this.form.title,autor:this.form.author,preco:this.form.price,id_vendedor:e.id}),r=o.data._id;await j(r,e.id),this.successMessage="Anúncio publicado com sucesso!",this.form={title:"",author:"",price:null},setTimeout(()=>this.successMessage="",3e3)}catch(e){console.error("Erro ao publicar anúncio",{status:e.response?.status,data:e.response?.data,message:e.message}),this.errorMessage=e.response?.data?.error||"Falha ao publicar o anúncio."}}}};const Q=(0,E.A)(q,[["render",N],["__scopeId","data-v-0f80b858"]]);var x=Q;const D={class:"container"},H={key:0},K={key:1};function z(e,o,r,t,a,s){const u=(0,n.g2)("AddBookForm");return(0,n.uX)(),(0,n.CE)("section",D,[o[0]||(o[0]=(0,n.Lk)("h2",null,"Livros Cadastrados",-1)),(0,n.bF)(u,{onBookAdded:s.loadBooks},null,8,["onBookAdded"]),a.books.length?((0,n.uX)(),(0,n.CE)("ul",H,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.books,e=>((0,n.uX)(),(0,n.CE)("li",{key:e._id},(0,i.v_)(e.title)+" — R$ "+(0,i.v_)(e.price.toFixed(2)),1))),128))])):((0,n.uX)(),(0,n.CE)("p",K,"Nenhum livro encontrado."))])}function G(e,o,r,a,s,i){return(0,n.uX)(),(0,n.CE)("form",{onSubmit:o[3]||(o[3]=(0,t.D$)((...e)=>i.onSubmit&&i.onSubmit(...e),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.titulo=e),placeholder:"Título",required:""},null,512),[[t.Jo,s.form.titulo]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.autor=e),placeholder:"Autor"},null,512),[[t.Jo,s.form.autor]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.preco=e),type:"number",placeholder:"Preço"},null,512),[[t.Jo,s.form.preco,void 0,{number:!0}]]),o[4]||(o[4]=(0,n.Lk)("button",{type:"submit"},"Adicionar Livro",-1))],32)}var Y={name:"AddBookForm",data(){return{form:{titulo:"",autor:"",preco:0}}},methods:{async onSubmit(){try{await P(this.form),this.$emit("book-added"),this.form={titulo:"",autor:"",preco:0}}catch(e){console.error("Erro ao adicionar:",e)}}}};const Z=(0,E.A)(Y,[["render",G]]);var ee=Z,oe={components:{AddBookForm:ee},data(){return{books:[]}},async created(){this.loadBooks()},methods:{async loadBooks(){const e=await B();this.books=e.data}}};const re=(0,E.A)(oe,[["render",z]]);var te=re;const ne={class:"container"},ae={key:0},se={key:1};function ie(e,o,r,t,a,s){return(0,n.uX)(),(0,n.CE)("section",ne,[o[0]||(o[0]=(0,n.Lk)("h2",null,"Meus Anúncios",-1)),a.anuncios.length?((0,n.uX)(),(0,n.CE)("ul",ae,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.anuncios,e=>((0,n.uX)(),(0,n.CE)("li",{key:e._id}," Livro: "+(0,i.v_)(e.id_livro.titulo)+" — Status: "+(0,i.v_)(e.status),1))),128))])):((0,n.uX)(),(0,n.CE)("p",se,"Você ainda não publicou anúncios."))])}var ue={name:"MeusAnunciosView",data(){return{anuncios:[]}},async created(){const e=JSON.parse(localStorage.getItem("user")),o=await $(e.id);this.anuncios=o.data}};const le=(0,E.A)(ue,[["render",ie]]);var ce=le;const de={class:"container"};function me(e,o,r,t,a,s){return(0,n.uX)(),(0,n.CE)("section",de,o[0]||(o[0]=[(0,n.Lk)("h2",null,"Negociações Passadas",-1),(0,n.Lk)("p",null,"Registros de todas as suas trocas e vendas concluídas.",-1)]))}var pe={name:"NegociacoesView"};const he=(0,E.A)(pe,[["render",me]]);var ve=he;const fe={class:"recomendacoes container"},ke={key:0,class:"error"},be={class:"book-grid"},ge={key:0};function Le(e,o,r,t,a,s){return(0,n.uX)(),(0,n.CE)("section",fe,[o[0]||(o[0]=(0,n.Lk)("h2",null,"Recomendações",-1)),a.errorMessage?((0,n.uX)(),(0,n.CE)("div",ke,(0,i.v_)(a.errorMessage),1)):(0,n.Q3)("",!0),(0,n.Lk)("div",be,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.recommendations,e=>((0,n.uX)(),(0,n.CE)("div",{key:e._id,class:"card"},[(0,n.Lk)("h3",null,(0,i.v_)(e.livro.titulo),1),(0,n.Lk)("p",null,"Autor: "+(0,i.v_)(e.livro.autor),1),(0,n.Lk)("p",null,"Preço: R$ "+(0,i.v_)(e.livro.preco.toFixed(2)),1),(0,n.Lk)("p",null,"Vendedor: "+(0,i.v_)(e.vendedor?.nome||"Desconhecido"),1)]))),128)),a.recommendations.length||a.errorMessage?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("p",ge," Nenhum anúncio disponível no momento. "))])])}r(8111),r(2489),r(1701);var _e={name:"RecomendacoesView",data(){return{recommendations:[],errorMessage:""}},async created(){const e=JSON.parse(localStorage.getItem("user")||"{}");try{const o=await W();this.recommendations=o.data.filter(o=>o.id_usuario!==e.id).map(e=>({...e,livro:e.id_livro,vendedor:e.id_usuario}))}catch(o){console.error("Erro ao carregar recomendações:",o),this.errorMessage=o.response?.data?.error||"Não foi possível carregar as recomendações."}}};const ye=(0,E.A)(_e,[["render",Le],["__scopeId","data-v-45de6e75"]]);var Ee=ye;const Se={class:"container"},Ce={key:0};function we(e,o,r,a,s,u){return(0,n.uX)(),(0,n.CE)("section",Se,[o[4]||(o[4]=(0,n.Lk)("h2",null,"Login",-1)),(0,n.Lk)("form",{onSubmit:o[2]||(o[2]=(0,t.D$)((...e)=>u.doLogin&&u.doLogin(...e),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.email=e),type:"email",placeholder:"Email",required:""},null,512),[[t.Jo,s.form.email]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.senha=e),type:"password",placeholder:"Senha",required:""},null,512),[[t.Jo,s.form.senha]]),o[3]||(o[3]=(0,n.Lk)("button",{class:"btn",type:"submit"},"Entrar",-1))],32),s.error?((0,n.uX)(),(0,n.CE)("p",Ce,(0,i.v_)(s.error),1)):(0,n.Q3)("",!0)])}const Ae=U.A.create({baseURL:"http://localhost:3000/auth"}),Xe=e=>Ae.post("/",e),Fe=e=>Ae.post("/",e);var Me={name:"LoginView",data(){return{form:{email:"",senha:""},error:""}},methods:{async doLogin(){try{const e=await Fe(this.form);localStorage.setItem("user",JSON.stringify(e.data)),window.dispatchEvent(new Event("login")),this.$router.push("/")}catch(e){this.error=e.response?.data?.error||"Falha no login"}}}};const Re=(0,E.A)(Me,[["render",we]]);var Ve=Re;const Oe={class:"container"},Je={key:0};function Ne(e,o,r,a,s,u){return(0,n.uX)(),(0,n.CE)("section",Oe,[o[5]||(o[5]=(0,n.Lk)("h2",null,"Cadastro",-1)),(0,n.Lk)("form",{onSubmit:o[3]||(o[3]=(0,t.D$)((...e)=>u.doRegister&&u.doRegister(...e),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.nome=e),placeholder:"Nome",required:""},null,512),[[t.Jo,s.form.nome]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.email=e),type:"email",placeholder:"Email",required:""},null,512),[[t.Jo,s.form.email]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.senha=e),type:"password",placeholder:"Senha",required:""},null,512),[[t.Jo,s.form.senha]]),o[4]||(o[4]=(0,n.Lk)("button",{class:"btn",type:"submit"},"Cadastrar",-1))],32),s.error?((0,n.uX)(),(0,n.CE)("p",Je,(0,i.v_)(s.error),1)):(0,n.Q3)("",!0)])}var Ue={name:"RegisterView",data(){return{form:{nome:"",email:"",senha:""},error:""}},methods:{async doRegister(){try{await Xe(this.form),this.$router.push("/login")}catch(e){this.error=e.response?.data?.error||"Falha no cadastro"}}}};const Ie=(0,E.A)(Ue,[["render",Ne]]);var Be=Ie;const Pe=[{path:"/",name:"Home",component:x},{path:"/procurados",name:"Procurados",component:te},{path:"/meus-anuncios",name:"MeusAnuncios",component:ce,meta:{requiresAuth:!0}},{path:"/negociacoes",name:"Negociacoes",component:ve},{path:"/recomendacoes",name:"Recomendacoes",component:Ee},{path:"/login",name:"Login",component:Ve},{path:"/register",name:"Register",component:Be}],Te=(0,l.aE)({history:(0,l.Bt)("/Site-novo-db/"),routes:Pe});Te.beforeEach((e,o,r)=>{const t=!!JSON.parse(localStorage.getItem("user")||"null");if(e.meta.requiresAuth&&!t)return r("/login");r()});var We=Te;U.A.defaults.baseURL="http://localhost:3000",console.log("API baseURL:",U.A.defaults.baseURL);const $e=(0,t.Ef)(X);$e.use(We),$e.mount("#app")}},o={};function r(t){var n=o[t];if(void 0!==n)return n.exports;var a=o[t]={exports:{}};return e[t].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(o,t,n,a){if(!t){var s=1/0;for(c=0;c<e.length;c++){t=e[c][0],n=e[c][1],a=e[c][2];for(var i=!0,u=0;u<t.length;u++)(!1&a||s>=a)&&Object.keys(r.O).every(function(e){return r.O[e](t[u])})?t.splice(u--,1):(i=!1,a<s&&(s=a));if(i){e.splice(c--,1);var l=n();void 0!==l&&(o=l)}}return o}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[t,n,a]}}(),function(){r.d=function(e,o){for(var t in o)r.o(o,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(o){return 0===e[o]};var o=function(o,t){var n,a,s=t[0],i=t[1],u=t[2],l=0;if(s.some(function(o){return 0!==e[o]})){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(u)var c=u(r)}for(o&&o(t);l<s.length;l++)a=s[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},t=self["webpackChunkSite_Projeto_2"]=self["webpackChunkSite_Projeto_2"]||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))}();var t=r.O(void 0,[504],function(){return r(7372)});t=r.O(t)})();
//# sourceMappingURL=app.9f566796.js.map