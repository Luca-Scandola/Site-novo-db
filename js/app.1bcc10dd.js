(function(){"use strict";var e={5086:function(e,o,r){var n=r(3751),t=r(641);const a={id:"app"};function s(e,o,r,n,s,i){const u=(0,t.g2)("HeaderNav"),l=(0,t.g2)("router-view"),c=(0,t.g2)("ContactSection");return(0,t.uX)(),(0,t.CE)("div",a,[(0,t.bF)(u),(0,t.bF)(l),(0,t.bF)(c)])}r(4114);var i=r(33),u=r(953),l=r(5220);const c={class:"site-header"},d={class:"container header-inner"},m={class:"logo"},p={class:"nav-list"},v={key:0},h={key:1},f={key:0,class:"profile-menu"};var k={__name:"HeaderNav",setup(e){const o=(0,u.KR)(!1),r=(0,u.KR)(JSON.parse(localStorage.getItem("user")||"null")),n=(0,l.rd)(),a=(0,t.EW)(()=>!!r.value?.id),s=(0,t.EW)(()=>r.value?.nome||"");function k(){o.value=!o.value}function b(){localStorage.removeItem("user"),window.dispatchEvent(new Event("logout")),n.push("/login")}function g(){r.value=JSON.parse(localStorage.getItem("user")||"null")}function L(){r.value=null}return(0,t.sV)(()=>{window.addEventListener("login",g),window.addEventListener("logout",L)}),(0,t.xo)(()=>{window.removeEventListener("login",g),window.removeEventListener("logout",L)}),(e,r)=>{const n=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("header",c,[(0,t.Lk)("div",d,[(0,t.Lk)("h1",m,[(0,t.bF)(n,{to:"/"},{default:(0,t.k6)(()=>r[0]||(r[0]=[(0,t.eW)("BookShare")])),_:1,__:[0]})]),(0,t.Lk)("nav",null,[(0,t.Lk)("ul",p,[(0,t.Lk)("li",null,[(0,t.bF)(n,{to:"/"},{default:(0,t.k6)(()=>r[1]||(r[1]=[(0,t.eW)("Início")])),_:1,__:[1]})]),(0,t.Lk)("li",null,[(0,t.bF)(n,{to:"/recomendacoes"},{default:(0,t.k6)(()=>r[2]||(r[2]=[(0,t.eW)("Recomendações")])),_:1,__:[2]})]),a.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("li",v,[(0,t.bF)(n,{to:"/login"},{default:(0,t.k6)(()=>r[3]||(r[3]=[(0,t.eW)("Entrar")])),_:1,__:[3]})])),a.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("li",h,[(0,t.bF)(n,{to:"/register"},{default:(0,t.k6)(()=>r[4]||(r[4]=[(0,t.eW)("Cadastrar")])),_:1,__:[4]})])),r[5]||(r[5]=(0,t.Lk)("li",null,[(0,t.Lk)("a",{href:"#contato"},"Contato")],-1))])]),a.value?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.Lk)("button",{class:"profile-btn",onClick:k},(0,i.v_)(s.value)+" ▾ ",1),(0,t.Lk)("div",{class:(0,i.C4)(["dropdown-content",{show:o.value}])},[(0,t.bF)(n,{to:"/recomendacoes"},{default:(0,t.k6)(()=>r[6]||(r[6]=[(0,t.eW)("Recomendações")])),_:1,__:[6]}),(0,t.bF)(n,{to:"/meus-anuncios"},{default:(0,t.k6)(()=>r[7]||(r[7]=[(0,t.eW)("Meus Anúncios")])),_:1,__:[7]}),(0,t.Lk)("button",{class:"profile-btn",onClick:b},"Sair")],2)])):(0,t.Q3)("",!0)])])}}};const b=k;var g=b;const L={id:"contato",class:"contact-section"};function _(e,o,r,n,a,s){return(0,t.uX)(),(0,t.CE)("section",L,o[0]||(o[0]=[(0,t.Lk)("div",{class:"container"},[(0,t.Lk)("h2",null,"Contato"),(0,t.Lk)("p",null,"Email: contato@bookshare.com")],-1)]))}var y={name:"ContactSection"},E=r(6262);const S=(0,E.A)(y,[["render",_]]);var C=S,w={name:"App",components:{HeaderNav:g,ContactSection:C}};const A=(0,E.A)(w,[["render",s]]);var X=A;const F={id:"home",class:"hero"},V={class:"container"},M={id:"vender",class:"sell-book"},O={class:"container"},J={key:0,class:"success"},N={key:1,class:"error"};function R(e,o,r,a,s,u){return(0,t.uX)(),(0,t.CE)("section",null,[(0,t.Lk)("section",F,[(0,t.Lk)("div",V,[o[7]||(o[7]=(0,t.Lk)("h2",null,"Encontre livros usados a preços acessíveis",-1)),(0,t.Lk)("form",{class:"search-form","aria-label":"Buscar livros",onSubmit:o[1]||(o[1]=(0,n.D$)((...e)=>u.onSearch&&u.onSearch(...e),["prevent"]))},[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.searchTerm=e),type:"search",placeholder:"Título, autor ou ISBN"},null,512),[[n.Jo,s.searchTerm]]),o[6]||(o[6]=(0,t.Lk)("button",{type:"submit"},"Buscar",-1))],32)])]),(0,t.Lk)("section",M,[(0,t.Lk)("div",O,[o[12]||(o[12]=(0,t.Lk)("h2",null,"Vender seu livro",-1)),(0,t.Lk)("form",{class:"sell-form",onSubmit:o[5]||(o[5]=(0,n.D$)((...e)=>u.onSubmit&&u.onSubmit(...e),["prevent"]))},[(0,t.Lk)("label",null,[o[8]||(o[8]=(0,t.eW)(" Título ")),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.title=e),required:""},null,512),[[n.Jo,s.form.title]])]),(0,t.Lk)("label",null,[o[9]||(o[9]=(0,t.eW)(" Autor ")),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.form.author=e)},null,512),[[n.Jo,s.form.author]])]),(0,t.Lk)("label",null,[o[10]||(o[10]=(0,t.eW)(" Preço (R$) ")),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>s.form.price=e),type:"number",step:"0.01",required:""},null,512),[[n.Jo,s.form.price,void 0,{number:!0}]])]),o[11]||(o[11]=(0,t.Lk)("button",{class:"btn",type:"submit"},"Publicar Anúncio",-1))],32),s.successMessage?((0,t.uX)(),(0,t.CE)("p",J,(0,i.v_)(s.successMessage),1)):(0,t.Q3)("",!0),s.errorMessage?((0,t.uX)(),(0,t.CE)("p",N,(0,i.v_)(s.errorMessage),1)):(0,t.Q3)("",!0)])])])}var U=r(4335);const I=U.A.create(),B=()=>I.get("/"),P=e=>I.post("/",e),T=U.A.create(),W=()=>T.get("/"),$=e=>T.get(`/mine/${e}`),j=(e,o)=>T.post("/",{id_livro:e,id_usuario:o});var q={name:"HomeView",data(){return{searchTerm:"",form:{title:"",author:"",price:null},successMessage:"",errorMessage:""}},methods:{onSearch(){console.log("Buscando por:",this.searchTerm)},async onSubmit(){this.errorMessage="",this.successMessage="";try{const e=JSON.parse(localStorage.getItem("user")),o=await P({titulo:this.form.title,autor:this.form.author,preco:this.form.price,id_vendedor:e.id}),r=o.data._id;await j(r,e.id),this.successMessage="Anúncio publicado com sucesso!",this.form={title:"",author:"",price:null},setTimeout(()=>this.successMessage="",3e3)}catch(e){console.error("Erro ao publicar anúncio",{status:e.response?.status,data:e.response?.data,message:e.message}),this.errorMessage=e.response?.data?.error||"Falha ao publicar o anúncio."}}}};const Q=(0,E.A)(q,[["render",R],["__scopeId","data-v-bc94db36"]]);var x=Q;const D={class:"container"},H={key:0},K={key:1};function z(e,o,r,n,a,s){const u=(0,t.g2)("AddBookForm");return(0,t.uX)(),(0,t.CE)("section",D,[o[0]||(o[0]=(0,t.Lk)("h2",null,"Livros Cadastrados",-1)),(0,t.bF)(u,{onBookAdded:s.loadBooks},null,8,["onBookAdded"]),a.books.length?((0,t.uX)(),(0,t.CE)("ul",H,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.books,e=>((0,t.uX)(),(0,t.CE)("li",{key:e._id},(0,i.v_)(e.title)+" — R$ "+(0,i.v_)(e.price.toFixed(2)),1))),128))])):((0,t.uX)(),(0,t.CE)("p",K,"Nenhum livro encontrado."))])}function G(e,o,r,a,s,i){return(0,t.uX)(),(0,t.CE)("form",{onSubmit:o[4]||(o[4]=(0,n.D$)((...e)=>i.onSubmit&&i.onSubmit(...e),["prevent"]))},[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.title=e),placeholder:"Título",required:""},null,512),[[n.Jo,s.form.title]]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.author=e),placeholder:"Autor"},null,512),[[n.Jo,s.form.author]]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.price=e),type:"number",placeholder:"Preço"},null,512),[[n.Jo,s.form.price,void 0,{number:!0}]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.form.condition=e)},o[5]||(o[5]=[(0,t.Lk)("option",{value:"novo"},"Novo",-1),(0,t.Lk)("option",{value:"usado"},"Usado",-1)]),512),[[n.u1,s.form.condition]]),o[6]||(o[6]=(0,t.Lk)("button",{type:"submit"},"Adicionar Livro",-1))],32)}var Y={name:"AddBookForm",data(){return{form:{title:"",author:"",price:0,condition:"usado"}}},methods:{async onSubmit(){try{await P(this.form),this.$emit("book-added"),this.form={title:"",author:"",price:0,condition:"usado"}}catch(e){console.error("Erro ao adicionar:",e)}}}};const Z=(0,E.A)(Y,[["render",G]]);var ee=Z,oe={components:{AddBookForm:ee},data(){return{books:[]}},async created(){this.loadBooks()},methods:{async loadBooks(){const e=await B();this.books=e.data}}};const re=(0,E.A)(oe,[["render",z]]);var ne=re;const te={class:"container"},ae={key:0},se={key:1};function ie(e,o,r,n,a,s){return(0,t.uX)(),(0,t.CE)("section",te,[o[0]||(o[0]=(0,t.Lk)("h2",null,"Meus Anúncios",-1)),a.anuncios.length?((0,t.uX)(),(0,t.CE)("ul",ae,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.anuncios,e=>((0,t.uX)(),(0,t.CE)("li",{key:e._id}," Livro: "+(0,i.v_)(e.id_livro.titulo)+" — Status: "+(0,i.v_)(e.status),1))),128))])):((0,t.uX)(),(0,t.CE)("p",se,"Você ainda não publicou anúncios."))])}var ue={name:"MeusAnunciosView",data(){return{anuncios:[]}},async created(){const e=JSON.parse(localStorage.getItem("user")),o=await $(e.id);this.anuncios=o.data}};const le=(0,E.A)(ue,[["render",ie]]);var ce=le;const de={class:"container"};function me(e,o,r,n,a,s){return(0,t.uX)(),(0,t.CE)("section",de,o[0]||(o[0]=[(0,t.Lk)("h2",null,"Negociações Passadas",-1),(0,t.Lk)("p",null,"Registros de todas as suas trocas e vendas concluídas.",-1)]))}var pe={name:"NegociacoesView"};const ve=(0,E.A)(pe,[["render",me]]);var he=ve;const fe={class:"recomendacoes container"},ke={key:0,class:"error"},be={class:"book-grid"},ge={key:0};function Le(e,o,r,n,a,s){return(0,t.uX)(),(0,t.CE)("section",fe,[o[0]||(o[0]=(0,t.Lk)("h2",null,"Recomendações",-1)),a.errorMessage?((0,t.uX)(),(0,t.CE)("div",ke,(0,i.v_)(a.errorMessage),1)):(0,t.Q3)("",!0),(0,t.Lk)("div",be,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.recommendations,e=>((0,t.uX)(),(0,t.CE)("div",{key:e._id,class:"card"},[(0,t.Lk)("h3",null,(0,i.v_)(e.livro.titulo),1),(0,t.Lk)("p",null,"Autor: "+(0,i.v_)(e.livro.autor),1),(0,t.Lk)("p",null,"Preço: R$ "+(0,i.v_)(e.livro.preco.toFixed(2)),1),(0,t.Lk)("p",null,"Vendedor: "+(0,i.v_)(e.vendedor?.nome||"Desconhecido"),1)]))),128)),a.recommendations.length||a.errorMessage?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("p",ge," Nenhum anúncio disponível no momento. "))])])}r(8111),r(2489),r(1701);var _e={name:"RecomendacoesView",data(){return{recommendations:[],errorMessage:""}},async created(){const e=JSON.parse(localStorage.getItem("user")||"{}");try{const o=await W();this.recommendations=o.data.filter(o=>o.id_usuario!==e.id).map(e=>({...e,livro:e.id_livro,vendedor:e.id_usuario}))}catch(o){console.error("Erro ao carregar recomendações:",o),this.errorMessage=o.response?.data?.error||"Não foi possível carregar as recomendações."}}};const ye=(0,E.A)(_e,[["render",Le],["__scopeId","data-v-45de6e75"]]);var Ee=ye;const Se={class:"container"},Ce={key:0};function we(e,o,r,a,s,u){return(0,t.uX)(),(0,t.CE)("section",Se,[o[4]||(o[4]=(0,t.Lk)("h2",null,"Login",-1)),(0,t.Lk)("form",{onSubmit:o[2]||(o[2]=(0,n.D$)((...e)=>u.doLogin&&u.doLogin(...e),["prevent"]))},[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.email=e),type:"email",placeholder:"Email",required:""},null,512),[[n.Jo,s.form.email]]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.senha=e),type:"password",placeholder:"Senha",required:""},null,512),[[n.Jo,s.form.senha]]),o[3]||(o[3]=(0,t.Lk)("button",{class:"btn",type:"submit"},"Entrar",-1))],32),s.error?((0,t.uX)(),(0,t.CE)("p",Ce,(0,i.v_)(s.error),1)):(0,t.Q3)("",!0)])}const Ae=U.A.create(),Xe=e=>Ae.post("/register",e),Fe=e=>Ae.post("/login",e);var Ve={name:"LoginView",data(){return{form:{email:"",senha:""},error:""}},methods:{async doLogin(){try{const e=await Fe(this.form);localStorage.setItem("user",JSON.stringify(e.data)),window.dispatchEvent(new Event("login")),this.$router.push("/")}catch(e){this.error=e.response?.data?.error||"Falha no login"}}}};const Me=(0,E.A)(Ve,[["render",we]]);var Oe=Me;const Je={class:"container"},Ne={key:0};function Re(e,o,r,a,s,u){return(0,t.uX)(),(0,t.CE)("section",Je,[o[5]||(o[5]=(0,t.Lk)("h2",null,"Cadastro",-1)),(0,t.Lk)("form",{onSubmit:o[3]||(o[3]=(0,n.D$)((...e)=>u.doRegister&&u.doRegister(...e),["prevent"]))},[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.nome=e),placeholder:"Nome",required:""},null,512),[[n.Jo,s.form.nome]]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.email=e),type:"email",placeholder:"Email",required:""},null,512),[[n.Jo,s.form.email]]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.senha=e),type:"password",placeholder:"Senha",required:""},null,512),[[n.Jo,s.form.senha]]),o[4]||(o[4]=(0,t.Lk)("button",{class:"btn",type:"submit"},"Cadastrar",-1))],32),s.error?((0,t.uX)(),(0,t.CE)("p",Ne,(0,i.v_)(s.error),1)):(0,t.Q3)("",!0)])}var Ue={name:"RegisterView",data(){return{form:{nome:"",email:"",senha:""},error:""}},methods:{async doRegister(){try{await Xe(this.form),this.$router.push("/login")}catch(e){this.error=e.response?.data?.error||"Falha no cadastro"}}}};const Ie=(0,E.A)(Ue,[["render",Re]]);var Be=Ie;const Pe=[{path:"/",name:"Home",component:x},{path:"/procurados",name:"Procurados",component:ne},{path:"/meus-anuncios",name:"MeusAnuncios",component:ce,meta:{requiresAuth:!0}},{path:"/negociacoes",name:"Negociacoes",component:he},{path:"/recomendacoes",name:"Recomendacoes",component:Ee},{path:"/login",name:"Login",component:Oe},{path:"/register",name:"Register",component:Be}],Te=(0,l.aE)({history:(0,l.Bt)("/Site-novo-db/"),routes:Pe});Te.beforeEach((e,o,r)=>{const n=!!JSON.parse(localStorage.getItem("user")||"null");if(e.meta.requiresAuth&&!n)return r("/login");r()});var We=Te;const $e="http://localhost:3000";U.A.defaults.baseURL=$e,console.log("API baseURL:",U.A.defaults.baseURL);const je=(0,n.Ef)(X);je.use(We),je.mount("#app")}},o={};function r(n){var t=o[n];if(void 0!==t)return t.exports;var a=o[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(o,n,t,a){if(!n){var s=1/0;for(c=0;c<e.length;c++){n=e[c][0],t=e[c][1],a=e[c][2];for(var i=!0,u=0;u<n.length;u++)(!1&a||s>=a)&&Object.keys(r.O).every(function(e){return r.O[e](n[u])})?n.splice(u--,1):(i=!1,a<s&&(s=a));if(i){e.splice(c--,1);var l=t();void 0!==l&&(o=l)}}return o}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,t,a]}}(),function(){r.d=function(e,o){for(var n in o)r.o(o,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(o){return 0===e[o]};var o=function(o,n){var t,a,s=n[0],i=n[1],u=n[2],l=0;if(s.some(function(o){return 0!==e[o]})){for(t in i)r.o(i,t)&&(r.m[t]=i[t]);if(u)var c=u(r)}for(o&&o(n);l<s.length;l++)a=s[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},n=self["webpackChunkSite_Projeto_2"]=self["webpackChunkSite_Projeto_2"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=r.O(void 0,[504],function(){return r(5086)});n=r.O(n)})();
//# sourceMappingURL=app.1bcc10dd.js.map